<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:ui="jakarta.faces.facelets"
      xmlns:f="jakarta.faces.core"
      xmlns:daw="http://java.sun.com/jsf/composite/daw"
      xmlns:c="jakarta.tags.core"
      xmlns:h="jakarta.faces.html">

<ui:composition template="/WEB-INF/templates/layout.xhtml">
   <ui:define name="contenido">
      <div class="container px-1 px-lg-1 my-1">
         <!--<section class="vh-100"></section>-->
         <section style="background-color: #eee;">
            <div class="container py-5">
               <div class="card mb-4">
                  <div class="card-body">
                     <h1 class="h3 mb-3 fw-normal">Listado de Ventas de TiendaDAW
                        <a class="btn btn-outline-primary"
                           href="#{request.contextPath}/usuarios/paginaUsuario.xhtml?email=${administrador}" >Volver
                        </a>
                     </h1>
                     <h:form>
                        <ui:repeat var="l" value="#{ctrlCompra.compras}">
                           <div class="row">
                              <div class="col-sm-3">
                                 <p class="mb-0">ID Compra</p>

                              </div>
                              <div class="col-sm-9">
                                 <p class="text-muted mb-0">${l.id}</p>
                              </div>
                              <div class="col-sm-3">
                                 <p class="mb-0">ID Producto</p>

                              </div>
                              <div class="col-sm-9">
                                 <p class="text-muted mb-0">${l.idProducto}</p>
                              </div>
                              <div class="col-sm-3">
                                 <p class="mb-0">ID Usuario</p>

                              </div>
                              <div class="col-sm-9">
                                 <p class="text-muted mb-0">${l.email}</p>
                              </div>

                              <div class="col-sm-3">
                                 <p class="mb-0">Nombre del Producto</p>

                              </div>
                              <div class="col-sm-9">
                                 <p class="text-muted mb-0">${ctrlCompra.getProductoComprado(l.idProducto).nombre}</p>
                              </div>

                              <div class="col-sm-3">
                                 <p class="mb-0">Precio</p>

                              </div>
                              <div class="col-sm-9">
                                 <p class="text-muted mb-0">${ctrlCompra.getProductoComprado(l.idProducto).precio} â‚¬</p>
                              </div>
                           </div>

                           <div>
                              <h:commandLink class="btn btn-outline-danger" value="Borrar"
                                             action="#{ctrlCompra.borra(l.id)}">
                              </h:commandLink>
                              <h:link class="btn btn-outline-primary" value="Editar"
                                      outcome="/ventas/modificar">
                                 <f:param name="id" value="#{l.id}"/>
                              </h:link>
                          </div>

                           <h:outputText value="(Producto Eliminado de la base de datos)" class="text-danger mb-0"
                                         rendered="#{ctrlCompra.getProductoComprado(l.idProducto).nombre==null}"></h:outputText>

                           <hr/>
                        </ui:repeat>
                        <div>
                           <h:link class="btn btn-outline-success" value="Crear"
                                   outcome="/ventas/insertar">
                           </h:link>
                       </div>
                     </h:form>

                  </div>

               </div>
            </div>
         </section>
      </div>
   </ui:define>
</ui:composition>
</html>


