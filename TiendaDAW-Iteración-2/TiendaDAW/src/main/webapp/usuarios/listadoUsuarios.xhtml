<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:ui="jakarta.faces.facelets"
      xmlns:f="jakarta.faces.core"
      xmlns:daw="http://java.sun.com/jsf/composite/daw"
      xmlns:h="jakarta.faces.html">

<h:head>
    <f:metadata>
        <f:viewParam name="administrador" required="true"
        />
    </f:metadata>
</h:head>

<ui:composition template="/WEB-INF/templates/layout.xhtml">
    <ui:define name="contenido">
        <div class="container px-1 px-lg-1 my-1">
            <!--<section class="vh-100"></section>-->
            <section style="background-color: #eee;">
                <div class="container py-5">
                    <div class="card mb-4">
                        <div class="card-body">
                            <h1 class="h3 mb-3 fw-normal">Listado de Usuarios
                                <a class="btn btn-outline-primary"
                                   href="#{request.contextPath}/usuarios/paginaUsuario.xhtml?email=${administrador}" >Volver
                                </a>
                            </h1>
                            <h:form>
                                <ui:repeat var="l" value="#{ctrlUsuarios.usuarios}">
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <p class="mb-0">Email</p>

                                        </div>
                                        <div class="col-sm-9">
                                            <p class="text-muted mb-0">${l.email}</p>
                                        </div>
                                        <div class="col-sm-3">
                                            <p class="mb-0">Contraseña</p>
                                        </div>
                                        <div class="col-sm-9">
                                            <p class="text-muted mb-0">${l.contraseña}
                                                <h:commandLink value="Detallar Usuario"
                                                               action="#{ctrlUsuarios.recuperaConEmail(l.email)}">
                                                    <f:ajax render="detalle"/>
                                                </h:commandLink>
                                            </p>
                                        </div>
                                        <div class="col-sm-6"></div>
                                        <div class="col-sm-3">
                                            <h:panelGroup id="detalle" layout="block">
                                                <h:form rendered="#{not empty(ctrlUsuarios.usuario.email)}">
                                                    <h3>Detalle del Usuario</h3>
                                                    <daw:detalleUsuario value="#{ctrlUsuarios.usuario}"/>
                                                </h:form>
                                            </h:panelGroup>
                                        </div>
                                        <div class="col-sm-3">

                                        </div>
                                    </div>

                                    <hr/>
                                </ui:repeat>
                            </h:form>

                        </div>

                    </div>
                </div>
            </section>
        </div>
    </ui:define>
</ui:composition>
</html>

